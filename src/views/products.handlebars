<h1 style="text-align:center;">ğŸ›ï¸ Tienda</h1>

<div style="text-align:center;margin-bottom:1rem;">
  <a href="/cart">ğŸ›’ Ver carrito <span id="cart-count"></span></a>
</div>

<!-- ğŸ” Buscador y ordenamiento -->
<form method="get" action="/" style="text-align:center;margin-bottom:2rem;">
  <input 
    type="text" 
    name="search" 
    placeholder="Buscar por nombre..." 
    value="{{search}}" 
    style="padding:8px;width:200px;border:1px solid #ccc;border-radius:4px;"
  />

  <select name="sort" style="padding:8px;border:1px solid #ccc;border-radius:4px;">
    <option value="">Ordenar por precio</option>
    <option value="asc" {{#if (eq sort "asc")}}selected{{/if}}>Menor a mayor</option>
    <option value="desc" {{#if (eq sort "desc")}}selected{{/if}}>Mayor a menor</option>
  </select>

  <button type="submit" style="padding:8px 16px;background:#4CAF50;color:white;border:none;border-radius:4px;cursor:pointer;">
    Aplicar
  </button>
</form>

<!-- ğŸ§± Lista de productos -->
<ul style="display:flex;flex-wrap:wrap;gap:1.5rem;justify-content:center;list-style:none;padding:0;">
  {{#each products}}
    <li style="width:250px;border:1px solid #ddd;border-radius:8px;padding:1rem;text-align:center;box-shadow:2px 2px 5px rgba(0,0,0,0.1);">
      {{#if this.thumbnail}}
        <img src="/images/{{this.thumbnail}}" alt="{{this.title}}" style="width:100%;height:180px;object-fit:cover;border-radius:6px;margin-bottom:10px;">
      {{/if}}
      <h3>{{this.title}}</h3>
      <p>{{this.description}}</p>
      <strong>${{this.price}}</strong><br>
      <small>Stock disponible: {{this.stock}}</small><br>

      <input 
        type="number" 
        id="qty-{{this._id}}" 
        min="1" 
        max="{{this.stock}}" 
        value="1" 
        style="width:60px;margin-top:5px;"
      >
      <button 
        class="add-to-cart-btn" 
        data-pid="{{this._id}}" 
        data-stock="{{this.stock}}" 
        style="margin-top:5px;background:#2196F3;color:white;padding:6px 12px;border:none;border-radius:4px;cursor:pointer;"
      >
        Agregar al carrito
      </button>
    </li>
  {{/each}}
</ul>

<!-- ğŸ”„ PaginaciÃ³n -->
{{#if totalPages}}
  <div style="text-align:center;margin-top:2rem;">
    {{#if hasPrevPage}}
      <a href="/?page={{prevPage}}&search={{search}}&sort={{sort}}" style="margin-right:10px;">â¬…ï¸ Anterior</a>
    {{/if}}

    <span>PÃ¡gina {{page}} de {{totalPages}}</span>

    {{#if hasNextPage}}
      <a href="/?page={{nextPage}}&search={{search}}&sort={{sort}}" style="margin-left:10px;">Siguiente â¡ï¸</a>
    {{/if}}
  </div>
{{/if}}

<script src="/js/main.js"></script>





